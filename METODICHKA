ВАЖНЫЕ ОБНОВЛЕНИЯ
1)Менять время не надо теперь если вы беретё ключи по пути F7 > Vipnet.iso(то что ниже vipnet2022) так что шаги со временем в методичке пропускаем
2)Перед запуском корда делаете следующее: Заходите в настройки корда(настройки самой виртуальной машины в vmware) > Advanced > VMwareTools > synchronize guest time with host переключаем в OFF
После запуска перед тем как писать user:user снова зайдите и проверьте не слетело ли
3)Методичку от Юлии Габовой можно найти по адресу https://github.com/xxxhale/vipnet-demo/blob/main/vipnet%20demo

!Сначала делаем снэпшоты всех виртуалок(снэпшот сбивает время, будьте внимательны)!
!Проверяйте время постоянно!
!Если вы используете лицензию из директории F7 то ставим дату 1 ноября 2023 (01.11.2023)!

Краткий список что нужно будет сделать:
1) Ставим Visual C
2) Устанавливаем БД
3) Пока ставится поставить IP, отключить firewall.
4) Настройки БД
5) Ставим серверный ЦУС на Net1_Admin
6) Ставим клиентский ЦУС на Net1_Open
7) Ставим УКЦ на Net1_Admin
8) Создаем сетку(помним про: роли кордов, межсерверный канал, связи)
9) Создаем справочники
10) В УКЦ создаем ключи
11) Перекидываем ключи на флешку
12) Ставим на Net1_Admin, Net2_Client(перед этим не забываем поменять символы) VipNet Client и закидываем туда ключи
13) Занимаемся кордом первым и вторым


Первым делом настраиваем IP, отключаем firewall и добавляем сетевое обнаружение(это следует проделать на всех тачках)
Ставим IP адреса в соответствии с файлом ip_hosts(он слева от текста)
Открываем панель управления > Сеть и Интернет > Центр управления сетями и общим доступом > Дополнительные параметры общего доступа > Ставим везде включить
Открываем cmd от имени админа и вписываем следующее:
netsh advfirewall set allprofiles state off
Устанавливаем VISUAL C - A7R > SOFT > ____000 > SERVER_I > PACKAGES > VISUAL_C
Перезагружаем виртуалку
!ЭТО ДЕЛАЕМ СО ВСЕМИ ВИРТУАЛКАМИ!

Ставим дату!

Подключаем CD через настройки виртуальной машины(Additional)
Заходим на диск

/////////////////////
УСТАНОВКА БАЗЫ ДАННЫХ
БАЗУ ДАННЫХ СТАВИМ НА Net1_Open
////////////////////
VIPNET A_7_R > SOFT > ___000 >> SERVER_I > PACKAGES > SQLEXPRE > SQLEXPR_
NEW SQL
Named Instance > WINNCCSQL
SQL Server Browser > Automatic
Mixed Mode > xxXX1234
Переходим выше во вкладку Filestream и ставим все галочки
Дальше ищем в поиске SQL Server 2014 Configuration Manager
SQL Server Network Config. > Protocols for WINNCCSQL
ПКМ TCP/IP > Enable
Переходим в SQL Server Services и ПКМ по SQL Server и SQL Server Browser > Restart

/////////////////////
ЦУС СЕРВЕРНЫЙ
СТАВИМ НА Net1_Admin
////////////////////
A_7_R > SOFT > ___000 > SERVER_I > PACKAGES > RU_RU > WINNCCSE
Проверка подлинности SQL Server
Log: sa
Pas: xxXX1234

///////////////////
ЦУС КЛИЕНТ
СТАВИМ НА Net1_Open
///////////////////
A7R > SOFT > ___000 > CLIENT_I > PACKAGES RU_RU > WINNCCCL

Далее устанавливаем УКЦ на Net1_Admin
Заходим на диск > A7R > SOFT > _____ > SETUP
Заходим в УКЦ > Настройка новой базы данных > пишем 1.2.3.3\winnccsql
Далее
Выбираем По имени и паролю пользователя SQL-сервера
Log: sa
Pas: xxXX1234
Потом далее до "настройки паролей"
Выбираем собственный пароль > Далее > Пишем xxXX1234

Перед тем как запускать приложения ПРОВЕРЯЙТЕ ВРЕМЯ!!!
//////////////////////////
ЗАПУСКАЕМ ЦУС НА Net1_Open
//////////////////////////
IP пишем 1.2.3.1
Логин и пароль Administrator
меняем на xxXX1234 
Нажимаем обзор и выбираем ключ
Подключаем CD > Browse... > F7 > справа листаем вниз и выбираем vipnet license.iso(как то так называется) > открываем папку Сеть 2 и копируем файл на рабочий стол
Если вы не видите F7, значит нужно перейти назад в левом окне

Выбираем "Настроить сеть самостоятельно"
Начинаем добавлять хосты(Net1_Coord, Net2_Coord, Net1-OperCA, Net2_Client)
Как добавили все хосты начинаем их настраивать
Дальше необходимо выдать роли кординаторам
Дважды кликаем по координатору > Роли узла > Выбираем существующие роли и удаляем их > Добавить... > Выбираем Coordinator HW-VA
Так же делаем на втором корде
Так же на корде необходимо зайти во вкладку "Межсерверные каналы" и добавить второй корд 

Дальше нужно сделать отношения
Делаем в соответствии с файлом "relationships", он слева от текста
Заходим слева во вкладку "Пользователи" > Выбираем пользователя > Связи с пользователями > Добавить связи

Нажимаем сверху "Справочники и ключи" > Создать справочники > Создать для всего списка

Переходим в УКЦ
Слева выбираем Сетевые узлы > ПКМ по хостам > "Выдать новый дистрибутив ключей"
Тут просто далее и вводим для каждого пароль xxXX1234

После открывается папка с ключами > Перекидываем их на флешку

Ставить VipNet Client нужно на Net1_Admin и Net2_Client
///////////////////////
УСТАНОВКА VIPNET CLIENT
///////////////////////

Заходим в VipNet Client
Должен предложить выбрать ключи(те что вы сгенерировали в УКЦ и скинули на флешку)
Если не предлагает то нажимаем на экране логина около "Настройка" на стрелочку > "Установить ключи" 
Скидываем ключ с флешки и выбираем его

Фикс вопросов вместо символов если такое будет
Идём в C: > Windows > System32 > ищем C_1252.NLS
ПКМ > Свойства > Безопасность > Дополнительно > где Владелец Изменить > Дополнительно... > Поиск > Выбираем группу Administrators > Применить > Ок > 
Тут же на вкладке безопасность > Изменить > Выбираем Administrators > Даём полный доступ > Ok
Меняем имя файла 1252.NLS на 1252.NLS.bck
Зажимаем ctrl и берем 1251 и перетаскиваем в эту же папку где находимся
Появляется копия, меняем его имя на C_1252.NLS
Перезагружаемся
Вылезает окошко VipNet, нажимаем отмена > Продолжить запуск Windows > Login > Ставим дату и запускаем VipNet Client

//////////////////////
ЗАВОДИМ КООРДИНАТОР
//////////////////////
Тут кнопки взаимодействия TAB, пробел и Enter
Запускаем >> Вводим логин и пароль "user" > Выбираем 2) 
Yes
Next
Выбираем Томск
Yes
Ставим дату 
После того как он нашел ключи выбираем ключ с первым кордом
Вводим пароль xxXX1234
Если не хавает лицуху то просто нажимаем Cancel и делаем снова пока не схавает(5-10 попыток, потом кладём болт и можно другой корд пробовать)

Next > Выбираем Set Static и нажимаем пробел для выбора > Next
ставим IP как в файле ip_hosts
так же поднимаем интерфейс eth1
Следующие интерфейсы(eth2, eth3) не поднимаем, оставляем их DOWN и листаем дальше
default gateway ставим в соответствии с файлом ip_hosts так же
листаем дальше до Do you want probe VPN connection...? > No  
Do you want to start VPN services...? > Yes
Run command shell
Корд инициализирован, поздравляю!
Те же действия и со вторым кордом, меняются только IP

!НЕ ОБЯЗАТЕЛЬНО, МОЖНО ПРОПУСТИТЬ!
(Если ключ палёный то делаем то что ниже)
Как всё загрузится пишем ? и вылезут команды
пишем команду enable
Просит пароль, его найти можно в УКЦ > Группы узлов > Вся сеть > Пароль администратора|
Как зашли пишем команду
machine show date, если дата не соответствует ключу то меняем
machine set date 2023-11-01 17:00:00(Время и дата для примера, надо знать до какого лицензия у ключа)
Пишем Yes(именно так)
Проверяем командой machine show date

profit
  















 



